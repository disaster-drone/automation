# Automation

### Table of Contents
1. [Description](#Description)
3. [Installation](#Installation-Proccess) 
5. [Migration Notes](#Migration-Notes)


## Description
The creation of the VR environment has been automated with a combination of Python, Bash Scripting, and C++. The automation will export an executable VR environment that can be accessed directly through a VR headset like Quest 2. The automation part for this project has multiple components to it and can also be run individually to export the 3D model with textures only as well as creating a VR environment from an existing 3D model (*supported format: .fbx*). 

The following components of the automation are described below:

* Photogrammetry Script: The photogrammetry script turns the images taken from the drone into a 3D model by using Reality Capture. It is a .bat file which opens reality capture, aligns images, calculates a model, simplifies the model, calculates the texture, and exports the camera location, the .fbx model, and textures for the .fbx.
* Unreal Import Script: The Unreal Engine Automation script utilizes the [Unreal Engine Python API](https://docs.unrealengine.com/4.27/en-US/PythonAPI/) and automates importing the images, 3D object and textures, and csv files for image GPS data. Additionally, it also creates a static mesh from the imported objects and creates a datatable using the pre-loaded struct for camera grab feature to work within the VR environment. It outputs a Unreal VR Project ready to be exported.
* Unreal Package Script: The Unreal Package Script is a batch file that exports the previously created Unreal Project to an executable. Currently, the script packages a Windows executable only. 
* Launch VR Environment Script: The Launch VR Environment Script runs the executable file and also exports the CSV file generated by the VR Camera Grab feature. The script uploads the CSV file to the respective project fodler in Google Cloud S3 Storage.
* RPI-> GC Script 
## Installation
**Prequisites**


**Installation**


## Migration Notes
* Photogrammetry Script
    * The photogrammetry script may need adjustments. We we're operating under the assumption that the EE team would deliver at least 5 data sets by the end of the semester to work out any problems with our script but none were delivered.
    * The script must be placed inside a folder along with files "exportcsv.xml" which holds csv export settings, "exportFBX.xml" which holds FBX export settings, and a folder named "Images" containing the drone images.
    * ![image](https://github.com/disaster-drone/automation/assets/94029910/6f1c4492-16df-4cc2-a35a-9083533e0b9d) Sets the coordinate system. This may need to be updated to whichever coordinate system the dataset was taken in.
    * ![image](https://github.com/disaster-drone/automation/assets/94029910/3cb0662b-d0ed-479d-91e2-47e7d3cfd1c0) Currently, the model is being simplified to 250,000 triangles. If you are looking for more detail, set it higher. Keep in mind this may affect performance within the VR Environment,



* Unreal Import Script
* Unreal Package Script
* Launch VR Environment Script
* RPI-> GC Script 
